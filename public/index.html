<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì˜¤í”ˆë‹¤íŠ¸ ì¬ë¬´ ë°ì´í„° ë¶„ì„ ì„œë¹„ìŠ¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 50px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .search-container {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .search-form {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            align-items: center;
        }
        
        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .search-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .search-btn:hover {
            transform: translateY(-2px);
        }
        
        .stats {
            text-align: center;
            margin-bottom: 20px;
            color: #666;
        }
        
        .results-container {
            margin-top: 20px;
        }
        
        .result-item {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .result-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .corp-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }
        
        .corp-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            font-size: 0.9em;
            color: #666;
        }
        
        .corp-code {
            background: #e3f2fd;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .stock-code {
            background: #f3e5f5;
            padding: 4px 8px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .no-results {
            text-align: center;
            padding: 40px;
            color: #999;
        }
        
        .error {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .feature-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .feature-card h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .search-form {
                flex-direction: column;
            }
            
            .search-input {
                width: 100%;
            }
            
            .corp-details {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¢ ì˜¤í”ˆë‹¤íŠ¸ ì¬ë¬´ ë°ì´í„° ë¶„ì„</h1>
            <p>ê¸°ì—… ì •ë³´ë¥¼ ë¹ ë¥´ê³  ì •í™•í•˜ê²Œ ê²€ìƒ‰í•˜ì„¸ìš”</p>
        </div>
        
        <div class="search-container">
            <div class="search-form">
                <input type="text" id="searchInput" class="search-input" 
                       placeholder="íšŒì‚¬ëª…, ì˜ë¬¸íšŒì‚¬ëª… ë˜ëŠ” ì£¼ì‹ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì‚¼ì„±ì „ì, Samsung, 005930)">
                <button onclick="searchCorporations()" class="search-btn">ğŸ” ê²€ìƒ‰</button>
            </div>
            
            <div id="stats" class="stats"></div>
            <div id="results" class="results-container"></div>
        </div>
        
        <div class="feature-grid">
            <div class="feature-card">
                <h3>ğŸ“Š ì‹¤ì‹œê°„ ê²€ìƒ‰</h3>
                <p>ì˜¤í”ˆë‹¤íŠ¸ì— ë“±ë¡ëœ ëª¨ë“  ê¸°ì—…ì˜ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ·ï¸ ë‹¤ì–‘í•œ ê²€ìƒ‰ ì˜µì…˜</h3>
                <p>íšŒì‚¬ëª…, ì˜ë¬¸íšŒì‚¬ëª…, ì£¼ì‹ì½”ë“œ ë“± ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            </div>
            <div class="feature-card">
                <h3>ğŸ’¼ ì •í™•í•œ ê¸°ì—… ì •ë³´</h3>
                <p>ê¸°ì—…ì½”ë“œ, ì£¼ì‹ì½”ë“œ ë“± ì •í™•í•œ ê¸°ì—… ì‹ë³„ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</p>
            </div>
        </div>
    </div>

    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì „ì²´ ê¸°ì—… ìˆ˜ ì¡°íšŒ
        window.onload = function() {
            loadTotalCount();
            
            // Enter í‚¤ ì´ë²¤íŠ¸ ì¶”ê°€
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchCorporations();
                }
            });
        };
        
        // ì „ì²´ ê¸°ì—… ìˆ˜ ì¡°íšŒ
        async function loadTotalCount() {
            try {
                const response = await fetch('/api/corporations/count');
                const count = await response.json();
                document.getElementById('stats').innerHTML = 
                    `ğŸ“ˆ í˜„ì¬ <strong>${count.toLocaleString()}</strong>ê°œ ê¸°ì—…ì´ ë“±ë¡ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`;
            } catch (error) {
                console.error('Error loading total count:', error);
                document.getElementById('stats').innerHTML = 
                    'ğŸ“ˆ ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²° ì¤‘ì…ë‹ˆë‹¤...';
            }
        }
        
        // ê¸°ì—… ê²€ìƒ‰
        async function searchCorporations() {
            const query = document.getElementById('searchInput').value.trim();
            const resultsDiv = document.getElementById('results');
            
            if (!query) {
                resultsDiv.innerHTML = '<div class="no-results">ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>';
                return;
            }
            
            // ë¡œë”© í‘œì‹œ
            resultsDiv.innerHTML = '<div class="loading">ğŸ” ê²€ìƒ‰ ì¤‘...</div>';
            
            try {
                const response = await fetch(`/api/corporations/search?q=${encodeURIComponent(query)}`);
                const corporations = await response.json();
                
                if (corporations.length === 0) {
                    resultsDiv.innerHTML = '<div class="no-results">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.</div>';
                    return;
                }
                
                // ê²°ê³¼ í‘œì‹œ
                let html = `<h3>ê²€ìƒ‰ ê²°ê³¼ (${corporations.length}ê°œ)</h3>`;
                corporations.forEach(corp => {
                    html += `
                        <div class="result-item">
                            <div class="corp-name">${corp.corp_name}</div>
                            <div class="corp-details">
                                <div><strong>ê¸°ì—…ì½”ë“œ:</strong> <span class="corp-code">${corp.corp_code}</span></div>
                                <div><strong>ì£¼ì‹ì½”ë“œ:</strong> <span class="stock-code">${corp.stock_code || 'N/A'}</span></div>
                                <div><strong>ì˜ë¬¸ëª…:</strong> ${corp.corp_eng_name || 'N/A'}</div>
                                <div><strong>ìˆ˜ì •ì¼:</strong> ${formatDate(corp.modify_date)}</div>
                            </div>
                        </div>
                    `;
                });
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                console.error('Error searching corporations:', error);
                resultsDiv.innerHTML = '<div class="error">ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</div>';
            }
        }
        
        // ë‚ ì§œ í¬ë§·íŒ…
        function formatDate(dateStr) {
            if (!dateStr || dateStr.length !== 8) return dateStr;
            const year = dateStr.substring(0, 4);
            const month = dateStr.substring(4, 6);
            const day = dateStr.substring(6, 8);
            return `${year}-${month}-${day}`;
        }
    </script>
</body>
</html>
